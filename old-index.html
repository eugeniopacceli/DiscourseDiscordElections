<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Disource Discord 1st election</title>

    <!-- Bootstrap core CSS -->
    <link href="./css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="./css/starter-template.css" rel="stylesheet">
  </head>

  <body>
    <!-- By Eugenio Fonseca -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
      <a class="navbar-brand" href="#">Disource Discord 1st election</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </nav>

    <main role="main" class="container">

      <div class="starter-template">
        <h1>Discourse Discord 1st mod elections</h1>
        <p class="lead">Mark the (maximum 5) folks that you want to see as moderators of the Discourse Discord server.<br>Choose candidates that you trust and see as sensible, honest, mature and responsible!<br>List sorted by time of candidature application.</p>
        <div class="card">
            <div class="card-header">
                Elector input form
            </div>
            <div class="card-block">
                <h4 class="card-title">Choose a maximum of 5 candidates for moderation that you recommend.</h4>
                <form id="voteForm" method="POST" action="/vote">
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value=" rustie#9491">
                                    1.  rustie#9491
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value=" VTomatoma#9227">
                                    2.  VTomatoma#9227
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value=" SENPAI å…ˆè¼©#0774">
                                    3.  SENPAI å…ˆè¼©#0774
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value=" FK#5868">
                                    4.  FK#5868
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value=" Hunter ðŸ˜ˆ#5089">
                                    5.  Hunter ðŸ˜ˆ#5089
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value=" buttmunch#6162">
                                    6.  buttmunch#6162
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value=" mop#7182">
                                    7.  mop#7182
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value=" TomDynamic#4673">
                                    8.  TomDynamic#4673
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value=" robbie#4389">
                                    9.  robbie#4389
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="spilk#9938">
                                10. spilk#9938
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="Rasenemus#0212">
                                11. Rasenemus#0212
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="limmyspapi#9378">
                                12. limmyspapi#9378
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="Ronald Raygun#4160">
                                13. Ronald Raygun#4160
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="Triggernomics#4142">
                                14. Triggernomics#4142
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="theamatuer#5417">
                                15. theamatuer#5417
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="John Egbert#1583">
                                16. John Egbert#1583
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="Pepp#2634">
                                17. Pepp#2634
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="tringle#3427">
                                18. tringle#3427
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="FlatEarth_Bear#6788">
                                19. FlatEarth_Bear#6788
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="NickNickers#0075">
                                20. NickNickers#0075
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="Trippy Pilot#4280">
                                21. Trippy Pilot#4280
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="Spasmodic-Colon#5717">
                                22. Spasmodic-Colon#5717
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="â˜­Comrade Weissâ˜­#8311">
                                23. â˜­Comrade Weissâ˜­#8311
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="j e r r y#4462">
                                24. j e r r y#4462
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="florists#0788">
                                25. florists#0788
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="ellie#3831">
                                26. ellie#3831
                        </label>
                    </div>
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" name="candidates" value="tyler111762#0800">
                                27. tyler111762#0800
                        </label>
                    </div>
                    <label for="text-input" class="col-form-label">Who are you? Identify your nickname used in the Discourse Discord community.</label>
                    <input class="form-control" type="text" name="votername" value="Your discord nickname" id="text-input">
                    <br/>
                    <a href="#" id="submitBtn" class="btn btn-primary">Submit</a>
                </form>
            </div>
        </div>
      </div>

    </main>

    <div class="modal fade" id="responseModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Vote Feedback</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p id="response"></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
            </div>
        </div>
    </div>

    <script src="./js/jquery.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script>
        function showModal(msg){
            $("#response").html(msg);
            $('#responseModal').modal({
                keyboard: false
            });
            $("#responseModal").show();
        }

        $("#submitBtn").click(function(){
            var voteContent = $("#voteForm").serializeArray();
            var numberOfVotes = 0;
            for(var obj of voteContent){
                if(obj.name == "candidates") numberOfVotes++;
            }

            if(numberOfVotes > 5){
                showModal("You can only vote for 5 (five) candidates for your vote to be counted and validated, try again!");
                return;
            }

            $.post("/vote", $("#voteForm").serialize()).done(function( data ) {
                showModal(data);
            });
        });
    </script>
  </body>
</html>